"use strict";var popupButton=document.querySelector(".popup"),registerBlock=document.querySelector(".register"),firstItem=registerBlock.querySelector(".form__item"),firstInput=firstItem.querySelector(".form__input")?firstItem.querySelector(".form__input"):firstItem.querySelector(".form__select");popupButton.addEventListener("click",function(e){e.preventDefault(),registerBlock.classList.add("register--active"),firstInput.focus()});var closeButton=document.querySelector(".register__close");closeButton.addEventListener("click",function(e){e.preventDefault(),registerBlock.classList.remove("register--active")}),window.addEventListener("keydown",function(e){27===e.keyCode&&registerBlock.classList.contains("register--active")&&registerBlock.classList.remove("register--active")});for(var selectItems=document.querySelectorAll(".form__item--select"),i=0;i<selectItems.length;i++)selectItems[i].addEventListener("click",function(e){e.target.parentElement.querySelector(".form__select").focus()});for(var textInputs=document.querySelectorAll(".form__input[type='text'], .form__input[type='email']"),_i=0;_i<textInputs.length;_i++)textInputs[_i].value&&label.classList.add("form__label--small"),textInputs[_i].addEventListener("blur",function(e){var t=e.target.parentElement.querySelector(".form__label");e.target.value&&t.classList.add("form__label--small")});var form=registerBlock.querySelector(".form"),formInputs=form.querySelectorAll(".form__input"),formSelects=form.querySelectorAll(".form__select");function validateInputs(){for(var e=!0,t=0;t<formInputs.length;t++){var r=formInputs[t].getAttribute("type"),i=formInputs[t].parentElement;deletePrompt(formInputs[t],i),formInputs[t].hasAttribute("required")&&!formInputs[t].value&&(i.classList.add("form__item--invalid"),createPrompt(i,"This is required field"),e=!1),formInputs[t].value&&"email"==r&&!validateEmail(formInputs[t].value)&&(i.classList.add("form__item--invalid"),createPrompt(i,"Invalid format"),e=!1),i.classList.add("form__item--valid")}return e}function validateSelects(){for(var e=!0,t=0;t<formSelects.length;t++){var r=formSelects[t].parentElement;deletePrompt(formSelects[t],r),formSelects[t].hasAttribute("required")&&!formSelects[t].value&&(r.classList.add("form__item--invalid"),createPrompt(r,"This is required field"),e=!1),r.classList.add("form__item--valid")}return e}function createPrompt(e,t){var r=document.createElement("div");r.classList.add("form__prompt"),r.innerText=t,e.appendChild(r)}function deletePrompt(e,t){var r=t.querySelector(".form__prompt");r&&(t.classList.remove("form__item--invalid"),t.classList.remove("form__item--valid"),t.removeChild(r))}function validateEmail(e){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}form.addEventListener("submit",function(e){var t=validateInputs(),r=validateSelects();if(!t||!r){e.preventDefault();for(var i=0;i<formInputs.length;i++)formInputs[i].addEventListener("focusin",function(e){validateInputs()});for(var s=0;s<formSelects.length;s++)formSelects[s].addEventListener("focusout",function(e){validateSelects()})}});